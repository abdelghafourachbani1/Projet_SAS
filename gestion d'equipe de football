#include <stdio.h>
#include <string.h>

typedef struct {
    int id ;
    char nom[20] ;
    char prenom[20] ;
    int numero_maillot;
    char post[10];
    int age;
    int buts;
} joueur;

int nombre_joueur = 10;
int counter_id = 110;

   joueur j[30] = {
    {100,"lionel","messi",10,"attaquant",38,91},
    {101,"zakaria","hedraf",11,"attaquant",40,35},
    {102,"yassine","bono",1,"gardien",28,0},
    {103,"youssef","moti3",1,"gardien",25,0},
    {104,"xavi","simonz",8,"milieu",27,15},
    {105,"toni","kros",6,"milieu",32,9},
    {106,"sergio","ramos",4,"defenseur",35,2},
    {107,"lamine","yamal",19,"attaquant",18,25},
    {108,"luis","diaz",7,"attaquant",23,30},
    {109,"mohamed","salah",12,"attaquant",30,40}
};   


void ajoute_joueur () {
    int p;
       if (30 > nombre_joueur) {
            printf("entre le nom du joueur : \n");
            scanf("%s",j[nombre_joueur].nom);
            printf("entre le prenom du joueur : \n");
            scanf("%s",j[nombre_joueur].prenom);
            printf("entre le numero du maillot du joueur : \n");
            scanf("%d",&j[nombre_joueur].numero_maillot);
          
            menu_poste : {
                printf("entre le poste du joueur : \n");
                printf("1 => guardien ; 2 => defenseur ; 3 => milieu ; 4 => attaquant \n");
            }
                scanf("%d",&p);
                switch (p) {
                case 1:
                    strcpy(j[nombre_joueur].post,"guardien");
                    break;
                case 2:
                    strcpy(j[nombre_joueur].post,"defenseur");
                    break;
                case 3:
                    strcpy(j[nombre_joueur].post,"milieu");
                    break;
                case 4:
                    strcpy(j[nombre_joueur].post,"attaquant");
                    break;
                default :
                    printf("error! entrer un nombre entre 1 et 4 ");
                    goto menu_poste;
                    break;
                }
        
           j[nombre_joueur].id = counter_id++;
           printf("entrer l'age du joueur : \n");
           scanf("%d",&j[nombre_joueur].age);
           printf("entrer le nombre des buts du joueur : \n");
           scanf("%d",&j[nombre_joueur].buts);
           nombre_joueur++;
        } else {
           printf("la liste des joueurs est complete : ");
        }
} 
void ajoute_plusieur_joueur() {
    int x;
    printf("entrer le nombre du joueur que tu veux ajouter : \n");
    scanf("%d", &x);
        for (i = 0;i < x;i++) {
            ajoute_joueur();
        }
}
void afficher_joueurs() {
    for (int i = 0; i < nombre_joueur; i++) {
        printf("nom : %s ; prenom : %s ;numero_maillot : %d ; post : %s ; age du joueur : %d ; id : %d ",j[i].nom,j[i].prenom,j[i].numero_maillot,j[i].post,&j[i].age,&j[i].id);
    }
}
void tri_alphabetique() {
    joueur variable_temporaire;
    for (int i = 0; i < nombre_joueur-1;i++) {
        for (int j = 0; jx < nombre_joueur-1-i;j++) {
            if (strcmp(j[i].nom, j[jx].nom) > 0) {
                temp = j[i];
                j[i] = j[j+1];
                j[j+1] = temp;
            }
        }
    }
    printf("tri par ordre alphabetique \n");
    afficher_joueurs();
}

int main() {

    int  id_joueur = 110;
    int choix_principale ,choix_ajoute ,choix_affiche ,choix_modification ,choix_statistiques;
    
    
    menu : {
    printf("=========menu==========\n");
    printf("1 => Ajouter un joueur : \n");
    printf("2 => Afficher la liste de tous les joueurs : \n");
    printf("3 => Modifier un joueur : \n");
    printf("4 => Supprimer un joueur : \n");
    printf("5 => Rechercher un joueur : \n");
    printf("6 => Statistiques : : \n");
    }
      scanf("%d",&choix_principale);
       
    switch (choix_principale) {
        case 1 :
            
            menu1 : {
            printf("1 => ajoute une joueur : \n");
            printf("2 => ajoute plusieur joueur : \n");
            printf("3 => reteur au menu principale : \n");
            }
              scanf("%d",&choix_ajoute);
              
               switch(choix_ajoute){
                
                   case 1: ajoute_joueur();
                        goto menu1;
                        break;
                   case 2: ajoute_plusieur_joueur();
                        goto menu1;
                        break;
                   case 3: goto menu;
                       break;
                    default: printf("entrer un nombre entre 1 et 3 : ");
                       goto menu1; 
                      break;
            }
            
           break;
        case 2 : 
            menu2 : {
                printf("1 => Trier les joueurs par ordre alphabétique (Nom) : \n");
                printf("2 => Trier les joueurs par âge. : \n");
                printf("3 => Afficher les joueurs par poste. : \n");
                printf("4 => reteur au menu principale : \n");
            }
            scanf("%d",&choix_affiche);
            
            switch(choix_affiche) {
                case 1 : 
                    tri_alphabétique(); 
                    goto menu2;
                    break;
                case 2 : 
                    tri_âge();
                    goto menu2;
                    break;
                case 3 : 
                   tri_poste();
                   goto menu2;
                   break;
                case 4: goto menu; 
                       break;
                default: printf("entrer un nombre entre 1 et 4 : \n");
                       goto menu2; 
                      break;
            }
            
           break;
        case 3 : 
             menu3 : {
                 printf("Modifier le poste d’un joueur : \n");
                 printf("Modifier l’âge d’un joueur: \n");
                 printf("Modifier le nombre de buts marqués par un joueur : \n");
                 printf("4 => reteur au menu principale : \n");
             }
             scanf("%d",&choix_modification);
             
            switch(choix_modification) {
                case 1 : 
                    modification_poste(); 
                    goto menu3;
                    break;
                case 2 : 
                    modification_age();
                    goto menu3;
                    break;
                case 3 : 
                    modification_buts();
                    goto menu3;
                    break;
                case 4: goto menu; 
                       break;
                default: printf("entrer un nombre entre 1 et 4 : ");
                       goto menu3; 
                      break;
            }
             
           break;
        case 4 :
            supression();
           break;
        case 5 :
           menu4 : {
               printf("1 => recherche par id : \n");
               printf("2 => recherche par nom : \n");
               printf("3 => reteur au menu principale : \n");
           }
           scanf("%d",&choix_recherche);
           
           case 1 : 
               recherche_id();
               goto menu4;
               break;
           case 2 : 
               recherche_nom();
               goto menu4;
               break;
           case 3 : goto menu;
               break;
           default: printf("entrer un nombre entre 1 et 3 : ");
                       goto menu4; 
                      break;
           
        case 6 :
           menu5 : {
               printf("1 => Afficher le nombre total de joueurs dans l’équipe : \n");
               printf("2 => Afficher l’âge moyen des joueurs : \n");
               printf("3 => Afficher les joueurs ayant marqué plus de X buts (X introduit par l’utilisateur) : \n");
               printf("4 => Afficher le meilleur buteur (joueur avec le maximum de buts) : \n");
               printf("5 => Afficher le joueur le plus jeune et le plus âgé : \n");
               printf("6 => reteur au menu principale : \n");
           }
           scanf("%d",choix_statistiques);
           
           switch (choix_statistiques) {
               case 1 : 
                  afficher_nombre_totale();
                  goto menu5;
                  break;
               case 2 : 
                  affiche_age_moyenne();
                  goto menu5;
                  break;
               case 3 : 
                  affiche_joueur_marque_plusX();
                  goto menu5;
                  break;
               case 4 : 
                  affiche_buteur();
                  goto menu5;
                  break;
               case 5 : 
                  affiche_plusjeune_plusage();
                  goto menu5;
                  break;
               case 6 : goto menu;
               break;
            default: printf("entrer un nombre entre 1 et 6 : ");
                       goto menu5; 
                      break;  
           }
           
           break;
        default : printf("saisir une nombre entre (1/6) : \n");
                 goto menu;  
           break ;
    }

    
    return 0;
}
